<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Mass Presentation</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/black.css" id="theme">
	<style>
		h1,
		h2 {
			text-transform: uppercase;
		}

		.slides section {
			line-height: 1.4;
			margin: 0 0;
		}

		.slides section p {
			font-size: 2.5em;
			text-align: center;
		}

		.slides section p em strong {
			text-decoration: underline;
		}

		#fullscreen-btn,
		#exit-fullscreen-btn {
			position: fixed;
			top: 20px;
			right: 20px;
			padding: 10px 15px;
			background: black;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			z-index: 1000;
		}

		#exit-fullscreen-btn {
			display: none;
		}
	</style>
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section data-markdown="mass.md" data-separator="^\n---\n" data-separator-vertical="^\n--\n" data-charset="utf-8"></section>
		</div>
	</div>

	<!-- Add the audio element -->
	<audio id="background-audio">
		<source src="media/audio/we-are-gathering-together-unto-him.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>

	<button id="fullscreen-btn" type="button">&#x26F6;</button>
	<button id="exit-fullscreen-btn" type="button">&#x2715;</button>

	<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js"></script>
	<script>
		function addFullscreenToggleFunctionality() {
			let fullScreenButton = document.getElementById("fullscreen-btn");
			let exitFullScreenButton = document.getElementById("exit-fullscreen-btn");

			fullScreenButton.addEventListener("click", function () {
				let elem = document.documentElement;

				if (!document.fullscreenElement) {
					if (elem.requestFullscreen) {
						elem.requestFullscreen();
					} else if (elem.mozRequestFullScreen) {
						elem.mozRequestFullScreen();
					} else if (elem.webkitRequestFullscreen) {
						elem.webkitRequestFullscreen();
					} else if (elem.msRequestFullscreen) {
						elem.msRequestFullscreen();
					}
					fullScreenButton.style.display = "none";
					exitFullScreenButton.style.display = "block";
				}
			});

			exitFullScreenButton.addEventListener("click", function () {
				if (document.fullscreenElement) {
					document.exitFullscreen();
					fullScreenButton.style.display = "block";
					exitFullScreenButton.style.display = "none";
				}
			});

			document.addEventListener("fullscreenchange", function () {
				if (!document.fullscreenElement) {
					fullScreenButton.style.display = "block";
					exitFullScreenButton.style.display = "none";
				}
			});
		}

		let revealSetting = {
			center: true,
			controls: true,
			height: 1080, // Matches 16:9 ratio
			history: true,
			plugins: [RevealMarkdown],
			progress: true,
			width: 1920, // Matches 16:9 ratio
		};

		Reveal.initialize(revealSetting);

		Reveal.on('ready', function (event) {
			addFullscreenToggleFunctionality();

			// Play the background audio when the presentation starts
			let audio = document.getElementById('background-audio');
			audio.play().catch(function(error) {
				console.error("Audio playback failed:", error);
			});
		});
	</script>
</body>

</html>
